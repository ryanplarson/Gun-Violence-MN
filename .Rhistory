library(dplyr)
library(dplyr)
library(tidyr)
library(stringr)
library(tidyr)
library(stringr)
library(readr)
ois <- read_csv("Police_Officer_Involved_Shootings.csv")
View(ois)
ois <- read.csv("Police_Officer_Involved_Shootings.csv")
View(ois)
ois <- read_csv("Police_Officer_Involved_Shootings.csv")
ois <- read_csv("Police_Officer_Involved_Shootings.csv")
library(tidyr)
library(stringr)
library(readr)
ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv")
View(uof)
str(uof)
View(uof)
View(ois)
library(dplyr)
uof <- read_csv("Police_Use_Of_Force.csv")
library(tidyr)
library(readr)
uof <- read_csv("Police_Use_Of_Force.csv")
View(uof)
stop <- read_csv("Police_Stop_Data.csv")
View(stop)
library(dplyr)
library(dplyr)
library(tidyr)
library(stringr)
library(readr)
library(lubridate)
ois <- read_csv("Police_Officer_Involved_Shootings.csv")
View(ois)
rm(ois)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv")
View(uof)
View(uof)
str(uof)
as.Date
?ymd_hms
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(response_date))
str(ouf)
str(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate))
View(uof)
str(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
week=isoweek(date))
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date))
View(uof)
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
group_by(year, date) %>%
summarize(use_of_force = n())
View(uof)
uof <- read_csv("Police_Use_Of_Force.csv")
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
group_by(year, date, Race) %>%
summarize(use_of_force = n())
View(uof)
?group_by
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
group_by(year, date, Race, .drop=F) %>%
summarize(use_of_force = n())
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
group_by(year, week, Race, .drop=F) %>%
summarize(use_of_force = n())
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
group_by(year, week, .drop=F) %>%
summarize(use_of_force = n())
View(uof)
52*3
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year!=1970) %>%
group_by(year, week, .drop=F) %>%
summarize(use_of_force = n())
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
summarize(use_of_force = n())
View(uof)
stop <- read_csv("Police_Stop_Data.csv")
View(stop)
uof <- read_csv("Police_Use_Of_Force.csv"
View(uof)
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
summarize(stops = n())
View(stop)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
summarize(use_of_force = n()) %>%
arrange(year, week) %>%
id()
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
summarize(use_of_force = n()) %>%
arrange(year, week) %>%
mutate(week_id = seq(1:dim(uof[1])))
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
add_tally(name = use_of_force) %>%
arrange(year, week)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
add_tally() %>%
arrange(year, week)
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally() %>%
arrange(year, week)
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(use_of_force) %>%
arrange(year, week)
?tally
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = use_of_force) %>%
arrange(year, week)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week)
View(uof)
tally(name = "police_stops")
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
stop <- read.csv("Police_Stop_Data.csv") %>%
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
tally(name = "police_stops")
tally(name = "police_stops")
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
mutate(week_id = row_number())
mutate(week_id = row_number())
library(dplyr)
library(tidyr)
library(stringr)
library(readr)
library(lubridate)
#get updated VERA jail data:
#https://raw.githubusercontent.com/vera-institute/jail-population-data/master/jail_population.csv
mutate(week_id = row_number())
mutate(week_id = row_number())
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
mutate(week_id = row_number())
View(uof)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
mutate(week_id = row_number()) %>%
select(week_id, year, id, everything())
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
mutate(week_id = row_number()) %>%
select(week_id, year, week, everything())
View(uof)
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
View(gun_series)
library(covdata)
data("covus")
View(covus)
data("covnat")
View(covnat)
data("nytcovus")
View(nytcovus)
rm(covnat, covus, nytcovus)
data("apple_mobility")
View(apple_mobility)
apple_mpls <- apple_mobility %>%
filter(region=="Minneapolis")
View(apple_mpls)
str(apple_mpls)
apple_mpls <- apple_mobility %>%
filter(region=="Minneapolis") %>%
mutate(week = isoweek(date),
year = year(date))
View(apple_mobility)
apple_mpls <- apple_mobility %>%
filter(region=="Minneapolis") %>%
mutate(week = isoweek(date),
year = year(date)) %>%
group_by(year, week) %>%
summarize(apple_mobility = mean(score, na.rm = T))
View(apple_mpls)
plot(gun_series$use_of_force, gun_series$week)
plot(gun_series$week, gun_series$use_of_force)
ggplot(gun_series)+geom_line(aes(x=week, y=use_of_force))
library(ggplot2)
ggplot(gun_series)+geom_line(aes(x=week, y=use_of_force))
ggplot(gun_series)+geom_line(aes(x=week, y=stops))
ggplot(gun_series)+geom_line(aes(x=week, y=police_stops))
library(astsa)
gun_series <- uof %>%
left_join(stop, by = c("year", "week")) %>%
ts()
plot(gun_series)
View(gun_series)
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))
ggplot(gun_series)+geom_line(aes(x=week_id, y=use_of_force))
View(gun_series)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
ungroup() %>%
mutate(week_id = row_number()) %>%
select(week_id, year, week, everything())
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))
ggplot(gun_series)+geom_line(aes(x=week_id, y=use_of_force))
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted")
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted", color="red")
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted", color="red", size=4)
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+theme_classic()
ggplot(gun_series)+geom_line(aes(x=week_id, y=police_stops))+ geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=police_stops))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=police_stops))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=use_of_force))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=police_stops))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=use_of_force))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=use_of_force))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date))
View(uof)
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date),
epiweek = epiweek(date))
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("Police_Use_Of_Force.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
ungroup() %>%
mutate(week_id = row_number()) %>%
select(week_id, year, week, everything())
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
stop <- read_csv("Police_Stop_Data.csv") %>%
mutate(date=ymd_hms(responseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "police_stops")
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
gun_series <- uof %>%
left_join(stop, by = c("year", "week"))
ggplot(gun_series)+
geom_line(aes(x=week_id, y=use_of_force))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
ggplot(gun_series)+
geom_line(aes(x=week_id, y=police_stops))+
geom_vline(xintercept=c(53), linetype="dotted", color="red", size=1)+
theme_minimal()
data("nytcovcounty")
View(nytcovcounty)
View(nytcovcounty)
View(nytcovcounty)
apple_mpls <- apple_mobility %>%
filter(region=="Minneapolis") %>%
mutate(week = isoweek(date),
year = year(date)) %>%
group_by(year, week) %>%
summarize(apple_mobility = sum(score, na.rm = T))
View(apple_mpls)
apple_mpls <- apple_mobility %>%
filter(region=="Minneapolis") %>%
mutate(week = isoweek(date),
year = year(date)) %>%
group_by(year, week) %>%
summarize(apple_mobility = mean(score, na.rm = T))
View(apple_mpls)
covid_hennepin <- nytcovcounty %>%
mutate(week = isoweek(date),
year = year(date)) %>%
filter(county=="Hennepin" & state=="Minnesota" & year >=2019) %>%
group_by(year, week) %>%
summarize(covid_cases = sum(cases, na.rm = T),
covid_deaths = sum(deaths, na.rm = T))
View(covid_hennepin)
#ois <- read_csv("Police_Officer_Involved_Shootings.csv")
uof <- read_csv("https://opendata.arcgis.com/datasets/215b4b543d894750aef86c725b56ee2a_0.csv") %>%
mutate(date=ymd_hms(ResponseDate),
year=year(date),
week=isoweek(date)) %>%
filter(year>=2019) %>%
group_by(year, week, .drop=F) %>%
tally(name = "use_of_force") %>%
arrange(year, week) %>%
ungroup() %>%
mutate(week_id = row_number()) %>%
select(week_id, year, week, everything())
